<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signin - Behance</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css">
    <link rel="stylesheet" href="styles/signup.css">
    <link rel="stylesheet" href="./styles/shortCodes.css">
</head>
<body>
    <section class="signin-container">
        <div class="logo-wrapper">
            <!-- <img src="./images/img-1.png" alt="">
            <h3>TELE MEDICINE</h3> -->
        </div>
        <div class="signin-form-wrapper">
            <div class="signin-form-box">
                <h5>Sign in to continue</h5>
                <div class="signin-logo-wrapper">
                    <!-- <img src="https://th.bing.com/th/id/OIP.JTcM3Y7art_7lButaIYjKQHaE7?pid=ImgDet&w=203&h=135&c=7&dpr=1.3" alt=""> -->
                    <h3 class="gradient-text">TELE MEDICINE</h3>
                </div>
                <!-- Signup Form -->
                <form action="">
                    <div class="form-container">
                        <label for="email">Email address</label>
                        <input type="email" name="email" id="email" required>
                        <label for="password">Password</label>
                        <input type="password" name="psw" id="password" required>
                    </div>    
                </form>
                <!-- Signup Form Ends-->
                <button class="signin-button">Sign in</button>
                <div id="info"></div>
                <p>Not a member yet? <span><a href="./signup.html">Sign up Now</a></span></p>
                <button class="facebook-login"><a href="#"><i class="fab fa-facebook-square "></i>Continue with Facebook</a></button>
                <button class="google-login"><a href="#"><i class="fab fa-google"></i>Continue with Google</a></button>
            </div>
        </div>
    </section>
</body>
<script>
    let userURL = "http://localhost:3000/user";

    let info = document.getElementById("info");

    let email = document.getElementById("email");
    let password = document.getElementById("password");
    let signinButton = document.querySelector(".signin-button");
    signinButton.addEventListener("click", loginUser);

    async function loginUser(){
        //console.log(email.value, password.value);
        let data = await fetch(`${userURL}?email=${email.value}&_password=${password.value}`);
        data = await data.json();
        console.log(data);

        if(data.length > 0){
            localStorage.setItem("userId", data[0].id);
            alert("Login Successful");
            window.location.href = "index.html";
        }
        else{
            info.textContent = `Your email and password does not match`;
            info.style.color = "red";
        }
    }

</script>
</html>